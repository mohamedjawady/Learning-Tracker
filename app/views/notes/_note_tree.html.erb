<div class="note-item" data-note-id="<%= note.id %>" style="margin-left: <%= depth * 20 %>px;">
  <div class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 group">
    <div class="flex items-center flex-1">
      <!-- Folder/Note Icon -->
      <% if note.is_folder? %>
        <i class="fas fa-folder text-yellow-500 mr-3"></i>
      <% else %>
        <i class="fas fa-sticky-note text-blue-500 mr-3"></i>
      <% end %>
      
      <!-- Title and Info -->
      <div class="flex-1">
        <%= link_to note, class: "text-gray-900 hover:text-indigo-600 font-medium" do %>
          <%= note.title %>
        <% end %>
        
        <div class="flex items-center space-x-4 mt-1">
          <% if note.tag_list.any? %>
            <div class="flex flex-wrap gap-1">
              <% note.tag_list.each do |tag| %>
                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800">
                  <%= tag %>
                </span>
              <% end %>
            </div>
          <% end %>
          
          <span class="text-xs text-gray-500">
            <%= time_ago_in_words(note.updated_at) %> ago
          </span>
          
          <% if note.has_children? %>
            <span class="text-xs text-gray-500">
              <i class="fas fa-layer-group mr-1"></i>
              <%= note.children.count %> items
            </span>
          <% end %>
        </div>
      </div>
    </div>
    
    <!-- Actions -->
    <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
      <%= link_to edit_note_path(note), class: "text-gray-400 hover:text-gray-600" do %>
        <i class="fas fa-edit text-sm"></i>
      <% end %>
      
      <% if note.is_folder? %>
        <%= link_to new_note_path(parent_id: note.id), class: "text-blue-400 hover:text-blue-600" do %>
          <i class="fas fa-plus text-sm"></i>
        <% end %>
      <% end %>
      
      <%= link_to note, method: :delete, 
          data: { confirm: "Are you sure you want to delete '#{note.title}'? This will also delete all child notes." }, 
          class: "text-red-400 hover:text-red-600" do %>
        <i class="fas fa-trash text-sm"></i>
      <% end %>
    </div>
  </div>
  
  <!-- Children -->
  <% if note.children.any? %>
    <div class="children">
      <%= render partial: 'notes/note_tree', collection: note.children.ordered, as: :note, locals: { depth: depth + 1 } %>
    </div>
  <% end %>
</div>
