<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Todo Header -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
    <div class="px-6 py-8">
      <div class="flex items-start justify-between">
        <div class="flex-1">
          <div class="flex items-center mb-4">
            <% if @todo.completed? %>
              <i class="fas fa-check-circle text-green-500 text-2xl mr-3"></i>
            <% else %>
              <i class="far fa-circle text-gray-400 text-2xl mr-3"></i>
            <% end %>
            <h1 class="text-3xl font-bold text-gray-900"><%= @todo.title %></h1>
          </div>
          
          <% if @todo.description.present? %>
            <p class="text-gray-600 text-lg mb-6"><%= @todo.description %></p>
          <% end %>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div>
              <span class="text-sm font-medium text-gray-500">Priority</span>
              <div class="mt-1">
                <% case @todo.priority %>
                <% when 'high' %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                    <i class="fas fa-exclamation-triangle mr-1"></i>
                    High Priority
                  </span>
                <% when 'medium' %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                    <i class="fas fa-minus mr-1"></i>
                    Medium Priority
                  </span>
                <% when 'low' %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                    <i class="fas fa-arrow-down mr-1"></i>
                    Low Priority
                  </span>
                <% end %>
              </div>
            </div>
            
            <div>
              <span class="text-sm font-medium text-gray-500">Status</span>
              <div class="mt-1">
                <% if @todo.completed? %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                    <i class="fas fa-check mr-1"></i>
                    Completed
                  </span>
                <% else %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                    <i class="fas fa-clock mr-1"></i>
                    Pending
                  </span>
                <% end %>
              </div>
            </div>
            
            <div>
              <span class="text-sm font-medium text-gray-500">Due Date</span>
              <div class="mt-1">
                <% if @todo.due_date %>
                  <% if @todo.due_date < Date.current && !@todo.completed? %>
                    <span class="text-red-600 font-medium">
                      <i class="fas fa-exclamation-triangle mr-1"></i>
                      Overdue (<%= @todo.due_date.strftime('%b %d, %Y') %>)
                    </span>
                  <% elsif @todo.due_date == Date.current && !@todo.completed? %>
                    <span class="text-orange-600 font-medium">
                      <i class="fas fa-clock mr-1"></i>
                      Due Today
                    </span>
                  <% else %>
                    <span class="text-gray-900">
                      <%= @todo.due_date.strftime('%b %d, %Y') %>
                    </span>
                  <% end %>
                <% else %>
                  <span class="text-gray-500">No due date</span>
                <% end %>
              </div>
            </div>
          </div>
          
          <% if @todo.completed? && @todo.completed_at %>
            <div class="bg-green-50 border border-green-200 rounded-md p-4 mb-6">
              <div class="flex">
                <div class="flex-shrink-0">
                  <i class="fas fa-check-circle text-green-400"></i>
                </div>
                <div class="ml-3">
                  <p class="text-sm text-green-800">
                    Completed on <%= @todo.completed_at.strftime('%B %d, %Y at %I:%M %p') %>
                    (<%= time_ago_in_words(@todo.completed_at) %> ago)
                  </p>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Quick Actions -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
    <div class="px-6 py-4">
      <h2 class="text-lg font-medium text-gray-900 mb-4">Quick Actions</h2>
      <div class="flex flex-wrap gap-3">
        <% unless @todo.completed? %>
          <%= button_to "Mark as Complete", toggle_complete_todo_path(@todo), method: :patch,
              class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700" %>
        <% else %>
          <%= button_to "Mark as Incomplete", toggle_complete_todo_path(@todo), method: :patch,
              class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700" %>
        <% end %>
        
        <%= link_to "Edit Todo", edit_todo_path(@todo),
            class: "inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50" %>
        
        <%= button_to "Delete Todo", todo_path(@todo), method: :delete,
            data: { confirm: "Are you sure you want to delete this todo?" },
            class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700" %>
      </div>
    </div>
  </div>
  
  <!-- Todo Details -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
    <div class="px-6 py-6">
      <h2 class="text-lg font-medium text-gray-900 mb-4">Details</h2>
      
      <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
        <div>
          <dt class="text-sm font-medium text-gray-500">Created</dt>
          <dd class="mt-1 text-sm text-gray-900">
            <%= @todo.created_at.strftime('%B %d, %Y at %I:%M %p') %>
          </dd>
        </div>
        
        <div>
          <dt class="text-sm font-medium text-gray-500">Last Updated</dt>
          <dd class="mt-1 text-sm text-gray-900">
            <%= @todo.updated_at.strftime('%B %d, %Y at %I:%M %p') %>
          </dd>
        </div>
        
        <% if @todo.due_date %>
          <div>
            <dt class="text-sm font-medium text-gray-500">Time Until Due</dt>
            <dd class="mt-1 text-sm text-gray-900">
              <% if @todo.completed? %>
                <span class="text-green-600">Completed</span>
              <% elsif @todo.due_date < Date.current %>
                <span class="text-red-600">Overdue by <%= distance_of_time_in_words(@todo.due_date, Date.current) %></span>
              <% else %>
                <span class="text-gray-900"><%= distance_of_time_in_words(Date.current, @todo.due_date) %> remaining</span>
              <% end %>
            </dd>
          </div>
        <% end %>
        
        <div>
          <dt class="text-sm font-medium text-gray-500">Priority Level</dt>
          <dd class="mt-1 text-sm text-gray-900 capitalize">
            <%= @todo.priority %> priority
            <% if @todo.priority == 'high' %>
              - Requires immediate attention
            <% elsif @todo.priority == 'medium' %>
              - Should be completed soon
            <% else %>
              - Can be completed when convenient
            <% end %>
          </dd>
        </div>
      </dl>
    </div>
  </div>
  
  <!-- Navigation -->
  <div class="flex justify-between">
    <%= link_to "← Back to Todos", todos_path,
        class: "inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50" %>
    
    <%= link_to "Back to Dashboard", root_path,
        class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700" %>
  </div>
</div>
