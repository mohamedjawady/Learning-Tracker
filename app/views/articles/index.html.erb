<div class="px-4 py-6 sm:px-0">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-900">Articles</h1>
    <%= link_to "Add Article", new_article_path, class: "bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium" %>
  </div>

  <!-- Search and Filter -->
  <div class="bg-white rounded-lg shadow mb-6 p-4">
    <%= form_with url: articles_path, method: :get, local: true, class: "flex flex-wrap gap-4 items-end" do |form| %>
      <div class="flex-1 min-w-64">
        <%= form.text_field :search, placeholder: "Search articles...", value: params[:search], class: "w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" %>
      </div>
      <div>
        <%= form.select :status, options_for_select([
          ['All Status', ''],
          ['Not Started', 'not_started'],
          ['In Progress', 'in_progress'],
          ['Completed', 'completed'],
          ['Paused', 'paused']
        ], params[:status]), {}, { class: "rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" } %>
      </div>
      <div>
        <%= form.submit "Filter", class: "bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium" %>
      </div>
    <% end %>
  </div>

  <!-- Articles Grid -->
  <% if @articles.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @articles.each do |article| %>
        <div class="bg-white rounded-lg shadow hover:shadow-lg transition-shadow">
          <div class="p-6">
            <div class="flex items-center justify-between mb-4">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                <%= case article.status
                    when 'not_started' then 'bg-gray-100 text-gray-800'
                    when 'in_progress' then 'bg-blue-100 text-blue-800'
                    when 'completed' then 'bg-green-100 text-green-800'
                    when 'paused' then 'bg-yellow-100 text-yellow-800'
                    end %>">
                <%= article.status.humanize %>
              </span>
              <div class="flex space-x-2">
                <%= link_to article_path(article), class: "text-gray-400 hover:text-gray-600" do %>
                  <i class="fas fa-eye"></i>
                <% end %>
                <%= link_to edit_article_path(article), class: "text-gray-400 hover:text-gray-600" do %>
                  <i class="fas fa-edit"></i>
                <% end %>
              </div>
            </div>

            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              <%= link_to article.title, article_path(article), class: "hover:text-indigo-600" %>
            </h3>

            <% if article.author.present? %>
              <p class="text-sm text-gray-600 mb-2">by <%= article.author %></p>
            <% end %>

            <% if article.description.present? %>
              <p class="text-gray-600 text-sm mb-4 line-clamp-3"><%= truncate(article.description, length: 120) %></p>
            <% end %>

            <!-- Progress Bar -->
            <div class="mb-4">
              <div class="flex justify-between items-center mb-1">
                <span class="text-xs font-medium text-gray-700">Progress</span>
                <span class="text-xs text-gray-500"><%= article.progress_percentage %>%</span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-green-600 h-2 rounded-full progress-bar transition-all duration-1000 ease-out" style="width: <%= article.progress_percentage %>%"></div>
              </div>
            </div>

            <!-- Time Info -->
            <div class="flex justify-between text-xs text-gray-500 mb-4">
              <span>
                <i class="fas fa-clock mr-1"></i>
                <%= pluralize(article.estimated_read_time, 'min') if article.estimated_read_time %>
              </span>
              <span>
                <i class="fas fa-stopwatch mr-1"></i>
                <%= pluralize(article.time_spent, 'min') %> spent
              </span>
            </div>

            <!-- Action Buttons -->
            <div class="flex space-x-2">
              <%= link_to article.url, target: "_blank", class: "flex-1 bg-indigo-600 hover:bg-indigo-700 text-white text-center py-2 px-3 rounded text-sm font-medium" do %>
                <i class="fas fa-external-link-alt mr-1"></i>
                Read Article
              <% end %>
              <%= link_to article_path(article), class: "bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-3 rounded text-sm font-medium" do %>
                <i class="fas fa-chart-line"></i>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="text-center py-12">
      <i class="fas fa-newspaper text-4xl text-gray-400 mb-4"></i>
      <h3 class="text-lg font-medium text-gray-900 mb-2">No articles found</h3>
      <p class="text-gray-500 mb-4">Start your reading journey by adding your first article.</p>
      <%= link_to "Add Article", new_article_path, class: "bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium" %>
    </div>
  <% end %>
</div>
